
<form #customerForm="ngForm" (ngSubmit)="onSaveNewCustomer(customer)" *ngIf="customer">
  <h3>{{customer.id===0 ? 'Create new' : 'Update'}} customer</h3>

  <input type="hidden" class="form-control" id="id" name="id"
      [(ngModel)]="customer.id" required>

  <div class="form-group">
    <label for="firstName">Customer first name</label>
    <div [hidden]="firstName.valid || firstName.pristine" class="error-feedback">
      Please enter firstname.
    </div>
    <input type="text" class="form-control" id="firstName" placeholder="Enter firstname" name="firstName"
      [(ngModel)]="customer.firstName"
      required
      #firstName="ngModel"
      pattern="(^[A-Z]).{3,}"
      >
    </div>

  <div class="form-group">
    <label for="lastName">Customer lastname</label>
    <div [hidden]="lastName.valid || lastName.pristine" class="error-feedback">
      Please enter lastname.
    </div>
    <input type="text" class="form-control" id="lastName" placeholder="Enter lastname" name="lastName"
      [(ngModel)]="customer.lastName"
      required
      #lastName="ngModel"
      pattern="(^[A-Z]).{3,}">
  </div>

  <div class="form-group">
    <label for="email">Customer email address</label>
    <div [hidden]="email.valid || email.pristine" class="error-feedback">
      Please enter valid email address.
    </div>
    <input type="email" class="form-control" id="email" placeholder="Enter email address" name="email"
      [(ngModel)]="customer.email"
      required
      #email="ngModel"
      pattern="(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|'(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*')@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])"
      >
  </div>

  <div class="form-group">
    <label for="address.zip">Customer ZIP</label>
    <div [hidden]="addressZip.valid || addressZip.pristine" class="error-feedback">
      Please shoose valid ZIP code.
    </div>
    <input type="number" class="form-control" id="address.zip" placeholder="Enter ZIP" name="address.zip"
      [(ngModel)]="customer['address.zip']"
      required
      #addressZip="ngModel"
      pattern="[0-9-\.]{4,}">
  </div>

  <div class="form-group">
    <label for="address.street">Country</label>
    <div [hidden]="addressCountry.valid || addressCountry.pristine" class="error-feedback">
      Please enter State. (Two letters, uppercase!)
    </div>
    <input type="text" class="form-control" id="address.country" placeholder="Enter Country" name="address.country"
      [(ngModel)]="customer['address.country']"
      required
      #addressCountry="ngModel"
      pattern="[A-Z]{2}">
  </div>

  <div class="form-group">
    <label for="address.street">Customer address City</label>
    <div [hidden]="addressCity.valid || addressCity.pristine" class="error-feedback">
      Please enter valid city name.
    </div>
    <input type="text" class="form-control" id="address.city" placeholder="Enter street" name="address.city"
      [(ngModel)]="customer['address.city']"
      required
      #addressCity="ngModel"
      pattern="[a-zA-Z0-9\s]{4,}">
  </div>

  <div class="form-group">
    <label for="address.street">Customer address street</label>
    <div [hidden]="addressStreet.valid || addressStreet.pristine" class="error-feedback">
      Please enter address.
    </div>
    <input type="text" class="form-control" id="address.street" placeholder="Enter street" name="address.street"
      [(ngModel)]="customer['address.street']"
      required
      #addressStreet="ngModel"
      pattern="[a-zA-Z0-9\s]{4,}">
  </div>

  <div class="form-check mb-4">
    <label class="form-check-label" for="newactive">
      <input class="form-check-input" type="checkbox" [(ngModel)]="customer.active" name="active" id="newactive">
          Active customer?
          <span class="form-check-sign">
            <span class="check"></span>
          </span>
      </label>
  </div>

  <button [disabled]="!customerForm.form.valid" type="submit" class="btn btn-primary">Save {{customer.id===0 ? 'New' : 'Update'}} customer</button>

  <button type="button" class="btn btn-warning pull-right" (click)="onCloseWithoutSaving()">close without saving</button>

</form>
